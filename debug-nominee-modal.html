<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Debug Nominee Modal - Shortcode Field</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
            min-height: 100vh;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .debug-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .btn-debug {
            background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 5px;
        }
        .btn-debug:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .debug-step {
            background: #f8f9fa;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .code-snippet {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="debug-container">
        <div class="text-center mb-4">
            <h1><i class="fas fa-bug me-2"></i>Debug Nominee Modal</h1>
            <p class="lead">Troubleshooting shortcode field visibility issue</p>
        </div>
        
        <div class="alert-danger">
            <h5><i class="fas fa-exclamation-triangle me-2"></i>ISSUE REPORTED</h5>
            <p><strong>Problem:</strong> Shortcode field is not visible in the Add Nominee modal</p>
            <p><strong>Expected:</strong> Field should be visible with blue styling and hashtag icon</p>
        </div>
        
        <div class="debug-step">
            <h5>üîç Step 1: Check if you can access the nominees page</h5>
            <p>First, make sure you can access the organizer nominees page:</p>
            <button class="btn-debug" onclick="window.open('organizer/nominees.php', '_blank')">
                <i class="fas fa-external-link-alt me-2"></i>Open Nominees Page
            </button>
        </div>
        
        <div class="debug-step">
            <h5>üîç Step 2: Look for the "Add New Nominee" button</h5>
            <p>On the nominees page, you should see a blue "Add New Nominee" button at the top.</p>
            <div class="code-snippet">
&lt;button class="btn btn-primary" onclick="openAddNomineeModal()"&gt;
    &lt;i class="fas fa-plus"&gt;&lt;/i&gt; Add New Nominee
&lt;/button&gt;
            </div>
        </div>
        
        <div class="debug-step">
            <h5>üîç Step 3: Click the button and check browser console</h5>
            <p>When you click "Add New Nominee", check the browser console (F12) for debug messages:</p>
            <ul>
                <li>‚úÖ <code>Shortcode field found</code> - Field exists in DOM</li>
                <li>‚úÖ <code>Field visible: true</code> - Field is visible</li>
                <li>‚ùå <code>Shortcode field NOT found!</code> - Field missing from DOM</li>
            </ul>
        </div>
        
        <div class="debug-step">
            <h5>üîç Step 4: Look for the shortcode field in the modal</h5>
            <p>The shortcode field should appear with these characteristics:</p>
            <ul>
                <li><strong>Label:</strong> "üì± Short Code (USSD Voting)" in blue</li>
                <li><strong>Input:</strong> Blue border (3px solid)</li>
                <li><strong>Placeholder:</strong> "e.g., MHA012 (auto-generated if empty)"</li>
                <li><strong>Help text:</strong> Blue text with info icon</li>
            </ul>
        </div>
        
        <div class="alert-warning">
            <h5><i class="fas fa-tools me-2"></i>Troubleshooting Steps</h5>
            <ol>
                <li><strong>Clear Browser Cache:</strong> Ctrl+F5 or Cmd+Shift+R</li>
                <li><strong>Check Console Errors:</strong> F12 ‚Üí Console tab</li>
                <li><strong>Inspect Element:</strong> Right-click modal ‚Üí Inspect</li>
                <li><strong>Search for "shortCode":</strong> Ctrl+F in Elements tab</li>
                <li><strong>Check CSS:</strong> Look for display:none or visibility:hidden</li>
            </ol>
        </div>
        
        <div class="debug-step">
            <h5>üîç Step 5: Manual DOM Check</h5>
            <p>If the field is still not visible, run this in the browser console:</p>
            <div class="code-snippet">
// Open the modal first, then run:
const field = document.getElementById('shortCode');
console.log('Field exists:', !!field);
if (field) {
    console.log('Field visible:', field.offsetHeight > 0);
    console.log('Field styles:', window.getComputedStyle(field));
    field.style.backgroundColor = 'yellow';
    field.style.border = '5px solid red';
}
            </div>
            <button class="btn-debug" onclick="copyToClipboard()">
                <i class="fas fa-copy me-2"></i>Copy Debug Code
            </button>
        </div>
        
        <div class="alert-success">
            <h5><i class="fas fa-lightbulb me-2"></i>Expected Result</h5>
            <p>After the recent updates, the shortcode field should be:</p>
            <ul>
                <li>‚úÖ <strong>Highly visible</strong> with blue styling</li>
                <li>‚úÖ <strong>Optional</strong> (no red asterisk)</li>
                <li>‚úÖ <strong>Auto-generating</strong> if left empty</li>
                <li>‚úÖ <strong>Validated</strong> if manually entered</li>
            </ul>
        </div>
        
        <div class="debug-step">
            <h5>üîç Step 6: Alternative Access</h5>
            <p>If the modal still doesn't work, try these alternatives:</p>
            <div class="text-center">
                <button class="btn-debug" onclick="window.open('test-nominee-form.html', '_blank')">
                    <i class="fas fa-vial me-2"></i>Test Form (Standalone)
                </button>
                <button class="btn-debug" onclick="window.open('setup-shortcode-voting.php', '_blank')">
                    <i class="fas fa-database me-2"></i>Setup Database
                </button>
            </div>
        </div>
        
        <div class="alert-danger">
            <h5><i class="fas fa-sos me-2"></i>If Still Not Working</h5>
            <p>Please check:</p>
            <ol>
                <li><strong>File Saved:</strong> Ensure nominees.php was saved after updates</li>
                <li><strong>Server Restart:</strong> Restart your web server (XAMPP/WAMP)</li>
                <li><strong>Browser Cache:</strong> Hard refresh or try incognito mode</li>
                <li><strong>File Permissions:</strong> Check if file is writable</li>
                <li><strong>PHP Errors:</strong> Check error logs for PHP issues</li>
            </ol>
        </div>
        
        <div class="text-center mt-4">
            <h5>üö® EMERGENCY SHORTCODE FIELD TEST</h5>
            <p>Click below to test if the shortcode field HTML is working:</p>
            <button class="btn-debug btn-lg" onclick="testShortcodeField()">
                <i class="fas fa-exclamation-triangle me-2"></i>EMERGENCY TEST
            </button>
        </div>
        
        <div id="emergencyTest" style="display: none; margin-top: 20px;">
            <div class="alert-success">
                <h5>üß™ Emergency Shortcode Field Test</h5>
                <div style="background: white; padding: 20px; border-radius: 8px; margin: 10px 0;">
                    <label for="testShortCode" style="color: #007bff; font-weight: bold;">
                        <i class="fas fa-hashtag"></i> Short Code (USSD Voting)
                    </label>
                    <input type="text" id="testShortCode" class="form-control" 
                           placeholder="e.g., MHA012 (auto-generated if empty)"
                           style="border: 2px solid #007bff; margin: 10px 0;">
                    <small style="color: #007bff; font-weight: bold;">
                        <i class="fas fa-info-circle"></i> Unique code for USSD voting. Leave empty to auto-generate.
                    </small>
                </div>
                <p><strong>‚úÖ If you can see this field above, the HTML is working correctly!</strong></p>
            </div>
        </div>
    </div>

    <script>
        function copyToClipboard() {
            const code = `// Open the modal first, then run:
const field = document.getElementById('shortCode');
console.log('Field exists:', !!field);
if (field) {
    console.log('Field visible:', field.offsetHeight > 0);
    console.log('Field styles:', window.getComputedStyle(field));
    field.style.backgroundColor = 'yellow';
    field.style.border = '5px solid red';
}`;
            
            navigator.clipboard.writeText(code).then(() => {
                alert('Debug code copied to clipboard! Paste it in the browser console.');
            });
        }
        
        function testShortcodeField() {
            document.getElementById('emergencyTest').style.display = 'block';
            document.getElementById('emergencyTest').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
